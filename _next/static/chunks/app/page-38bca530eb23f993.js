(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4366:(e,t,a)=>{Promise.resolve().then(a.bind(a,2590))},2590:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(7437),l=a(998),n=a(2265);function r(){let{data:e}=(0,l.useSession)(),[t,a]=(0,n.useState)([]),[r,d]=(0,n.useState)(null),[i,c]=(0,n.useState)(""),[o,b]=(0,n.useState)("");(0,n.useEffect)(()=>{e&&(async()=>{let e=await fetch("/api/task");a(await e.json())})()},[e]);let h=async e=>{let s=await fetch("/api/task",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,updatedTask:{work:i,date:o}})}),l=await s.json();a(t.map(t=>t.id===e?l:t)),d(null),c(""),b("")},u=async e=>{await fetch("/api/task",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:e})}),a(t.filter(t=>t.id!==e))};return e?(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{className:"border bg-slate-300 p-1 ml-32",onClick:()=>(0,l.signOut)(),children:"Sign out"}),(0,s.jsx)("div",{className:"overflow-x-auto flex justify-center",children:(0,s.jsxs)("table",{className:"table bg-emerald-300 border border-black",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border border-black bg-slate-200",children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Task"}),(0,s.jsx)("th",{children:"Change"})]})}),(0,s.jsx)("tbody",{children:t.length>0?t.map(e=>(0,s.jsxs)("tr",{className:"border border-black",children:[(0,s.jsx)("td",{className:"p-4",children:r===e.id?(0,s.jsx)("input",{type:"date",value:o,onChange:e=>b(e.target.value),className:"border p-2"}):new Date(e.date).toLocaleDateString()}),(0,s.jsx)("td",{className:"p-6",children:r===e.id?(0,s.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),className:"border p-2"}):e.work}),(0,s.jsx)("td",{className:"flex gap-2 p-4",children:r===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>h(e.id),className:"bg-amber-600 text-slate-100 p-2 rounded-lg",children:"Save"}),(0,s.jsx)("button",{onClick:()=>{d(null),c(""),b("")},className:"bg-red-600 text-slate-100 p-2 rounded-lg",children:"Cancel"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{d(e.id),c(e.work),b(e.date)},className:"bg-amber-600 text-slate-100 p-2 rounded-lg",children:"Update"}),(0,s.jsx)("button",{onClick:()=>u(e.id),className:"bg-red-600 text-slate-100 p-2 rounded-lg",children:"Delete"})]})})]},e.id)):(0,s.jsx)("tr",{className:"border border-black",children:(0,s.jsx)("td",{colSpan:"3",className:"p-4 text-center",children:"No tasks available"})})})]})})]}):(0,s.jsxs)("div",{className:"text-center mt-10",children:[(0,s.jsx)("p",{className:"text-xl",children:"Not signed in"}),(0,s.jsx)("button",{className:"border border-black bg-blue-300 p-2",onClick:()=>(0,l.signIn)("github"),children:"Sign in with GitHub"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[998,130,215,744],()=>t(4366)),_N_E=e.O()}]);